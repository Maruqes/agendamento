
<html>
  <head>
    <title>This is the title of the webpage!</title>
  </head>
  <body>
    <p>This is an example paragraph. Anything in the <strong>body</strong> tag will appear on the page, just like this <strong>p</strong> tag and its contents.</p>
    <button onclick="click_test()">SUBMIT</button>
    <button onclick="login_cookie()">send_cookie</button>
  </body>

  <script>

    function getCookie(name) {
      const value = `; ${document.cookie}`;
      const parts = value.split(`; ${name}=`);
      if (parts.length === 2) return parts.pop().split(';').shift();
    }

    function login_cookie()
    {
      var cookie = getCookie('session_token');

      let data = {
        cookie: cookie,
      };
      fetch("http://localhost:8080/login_cookie", {
        method: "POST",
        mode: 'cors',
        headers: {'Content-Type': 'application/json',
                  'Access-Control-Allow-Origin': '*'
      }, 
        body: JSON.stringify(data)
      }).then(res => {
        console.log("Request complete! response:", res);
      });
    }
    login_cookie();
    function click_test()
    {
      // let data = {
      //   name: "massagem1",
      //   email: "test1@test.com",
      //   user_number: "+351938240149",
      //   date: [
      //     {
      //       dia: 20,
      //       mes: 12,
      //       ano: 2023,

      //       hora: 13,
      //       minuto: 23
      //     }
      //   ]
      // };

      // let data = {
      //   name: "massagem4",  
      //   price: 59.99,
      //   image: "https://google.com",
      //   duration: 60,
      // };

      // let data = {
      //   user: "user1",
      //   password:"pass1"
      // };
      fetch("http://localhost:8080/login", {
        method: "POST",
        mode: 'cors',
        headers: {'Content-Type': 'application/json',
                  'Access-Control-Allow-Origin': '*'
      }, 
        body: JSON.stringify(data)
      }).then(res => {
        console.log("Request complete! response:", res);
        if(res.status != 200)
          return;
        res.json().then(session => {
          var session_token = JSON.parse(session).session_token;
          console.log(session_token);
          document.cookie = "session_token="+session_token; 
        })
      });
    }
  </script>
</html>